<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Doggyco Sky Edition</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none;}
body{overflow:hidden;font-family:Arial,sans-serif;background:#87ceeb;}

#wrap{position:relative;height:100vh;max-width:480px;margin:auto;overflow:hidden;}

canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:10px;
width:100%;
text-align:center;
color:white;
z-index:10;
text-shadow:0 0 5px black;
}

#hearts{font-size:28px;}

.barWrap{
width:80%;
height:10px;
background:#333;
margin:5px auto;
border-radius:10px;
overflow:hidden;
}

.bar{
height:100%;
width:100%;
background:lime;
}

.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,0.7);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
color:white;
z-index:20;
}

button{
padding:12px 30px;
font-size:18px;
border:none;
background:#ffcc00;
border-radius:6px;
cursor:pointer;
margin-top:15px;
}
</style>
</head>
<body>

<div id="wrap">
<div id="ui">
<div id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
<div>Score: <span id="score">0</span></div>
<div>Zeit: <span id="time">30</span></div>

<div>Energie</div>
<div class="barWrap"><div id="energyBar" class="bar"></div></div>

<div>Level</div>
<div class="barWrap"><div id="levelBar" class="bar"></div></div>
</div>

<canvas id="game"></canvas>

<div class="overlay" id="startScreen">
<h1>DOGGYCO SKY</h1>
<button onclick="startGame()">START</button>
</div>

<div class="overlay" id="gameOver" style="display:none;">
<h2>GAME OVER</h2>
<div id="final"></div>
<button onclick="location.reload()">NEUSTART</button>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let W,H;
let dogX=200;
let energy=100;
let levelEnergy=100;
let timeLeft=30;
let hearts=3;
let score=0;
let active=false;
let lastTime=0;

let clouds=[],birds=[];
let spiders=[
{x:100,y:0,dir:1,drop:0},
{x:300,y:0,dir:-1,drop:0}
];

let audioCtx=null, musicOsc=null;

/* Resize */
function resize(){
W=canvas.width=canvas.parentElement.offsetWidth;
H=canvas.height=canvas.parentElement.offsetHeight;
}
window.addEventListener("resize",resize);
resize();

/* Music */
function startMusic(){
audioCtx=new(window.AudioContext||window.webkitAudioContext)();
musicOsc=audioCtx.createOscillator();
let gain=audioCtx.createGain();
musicOsc.type="sine";
musicOsc.frequency.value=120;
gain.gain.value=0.02;
musicOsc.connect(gain);
gain.connect(audioCtx.destination);
musicOsc.start();
}

/* Explosion */
function explodeHeart(){
const heartDiv=document.getElementById("hearts");
heartDiv.style.transform="scale(1.8)";
heartDiv.style.color="red";
setTimeout(()=>{
heartDiv.style.transform="scale(1)";
heartDiv.style.color="white";
},300);
}

/* Start */
function startGame(){
startMusic();
document.getElementById("startScreen").style.display="none";
active=true;
clouds=[];
birds=[];
for(let i=0;i<5;i++){
clouds.push({x:Math.random()*W,y:Math.random()*200});
}
lastTime=performance.now();
requestAnimationFrame(loop);
}

/* Input */
canvas.onmousemove=e=>{
dogX=e.clientX-canvas.getBoundingClientRect().left;
};

/* Loop */
function loop(t){
if(!active)return;
let delta=(t-lastTime)/1000;
lastTime=t;
ctx.clearRect(0,0,W,H);

/* Sky */
let grad=ctx.createLinearGradient(0,0,0,H);
grad.addColorStop(0,"#87ceeb");
grad.addColorStop(1,"#e0f7ff");
ctx.fillStyle=grad;
ctx.fillRect(0,0,W,H);

/* Clouds */
ctx.fillStyle="white";
clouds.forEach(c=>{
c.x+=20*delta;
if(c.x>W)c.x=-50;
ctx.beginPath();
ctx.arc(c.x,c.y,30,0,Math.PI*2);
ctx.fill();
});

/* Birds */
if(Math.random()<0.01)
birds.push({x:-20,y:50+Math.random()*100});
ctx.font="20px Arial";
birds.forEach((b,i)=>{
b.x+=100*delta;
ctx.fillText("üê¶",b.x,b.y);
if(b.x>W+20)birds.splice(i,1);
});

/* Spiders */
ctx.strokeStyle="black";
spiders.forEach(s=>{
s.x+=s.dir*50*delta;
if(s.x<50||s.x>W-50)s.dir*=-1;

s.drop+=50*delta;
if(s.drop>150)s.drop=0;

ctx.beginPath();
ctx.moveTo(s.x,0);
ctx.lineTo(s.x,s.drop);
ctx.stroke();
ctx.fillText("üï∑Ô∏è",s.x-10,s.drop+20);

if(Math.abs(s.x-dogX)<30&&s.drop>H-150){
energy-=20;
}
});

/* Dog */
ctx.font="50px Arial";
ctx.fillText("üê∂",dogX-25,H-80);

/* Energy */
document.getElementById("energyBar").style.width=energy+"%";
document.getElementById("levelBar").style.width=levelEnergy+"%";

/* Timer */
timeLeft-=delta;
document.getElementById("time").innerText=Math.floor(timeLeft);

/* Level drain */
levelEnergy-=5*delta;

if(levelEnergy<50){
levelEnergy=100;
}

if(energy<=0){
hearts--;
explodeHeart();
energy=100;
if(hearts<=0){
active=false;
document.getElementById("gameOver").style.display="flex";
document.getElementById("final").innerHTML="Score: "+score;
}
}

/* Score */
score+=Math.floor(delta*10);
document.getElementById("score").innerText=score;
document.getElementById("hearts").innerText="‚ù§Ô∏è".repeat(hearts);

requestAnimationFrame(loop);
}
</script>

</body>
</html>

