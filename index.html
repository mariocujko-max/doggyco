<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Doggyco 4.0 ‚Äì Arcade Boost</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
--yellow:#ffd166;
--pink:#ff9ecf;
--green:#06d6a0;
--red:#ef476f;
}

*{margin:0;padding:0;box-sizing:border-box;}

body{
background:linear-gradient(180deg,#0f0f1a,#000);
color:white;
display:flex;
flex-direction:column;
align-items:center;
height:100vh;
overflow:hidden;
font-family:sans-serif;
}

h1{
font-family:'Press Start 2P';
color:var(--yellow);
margin:15px 0;
text-shadow:0 0 10px var(--yellow);
}

#gameWrapper{
position:relative;
width:100%;
max-width:420px;
flex:1;
border-radius:30px;
overflow:hidden;
border:4px solid white;
box-shadow:0 0 40px rgba(255,255,255,0.3);
}

canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:10px;left:10px;right:10px;
display:flex;
justify-content:space-between;
font-family:'Press Start 2P';
font-size:0.6rem;
z-index:10;
}

.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,0.85);
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:20;
}

button{
padding:20px 40px;
font-family:'Press Start 2P';
background:var(--green);
border:none;
border-radius:20px;
cursor:pointer;
font-size:1rem;
}

#sliderArea{
width:100%;
max-width:420px;
padding:20px;
background:#111;
}

#slider{
width:100%;
}
</style>
</head>
<body>

<h1>DOGGYCO 4.0</h1>

<div id="gameWrapper">
<div id="ui">
<div>‚≠ê <span id="score">0</span></div>
<div id="hearts">‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</div>
<div>LVL <span id="lvl">1</span></div>
</div>

<canvas id="game"></canvas>

<div class="overlay" id="start">
<button onclick="startGame()">START</button>
</div>

<div class="overlay" id="gameOver" style="display:none;">
<h2 style="color:var(--red);font-family:'Press Start 2P';margin-bottom:20px;">GAME OVER</h2>
<button onclick="location.reload()">RETRY</button>
</div>
</div>

<div id="sliderArea">
<input type="range" id="slider" min="0" max="1000" value="500">
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const slider=document.getElementById("slider");

let state="start";
let score=0,lives=3,level=1;
let items=[],spiders=[];
let spawnTimer=0;
let audioCtx;

let dog={x:200,vx:0,bounce:0};

function resize(){
const dpr=window.devicePixelRatio||1;
const rect=canvas.getBoundingClientRect();
canvas.width=rect.width*dpr;
canvas.height=rect.height*dpr;
ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize",resize);

function playTone(freq,dur=0.1){
if(!audioCtx)return;
let o=audioCtx.createOscillator();
let g=audioCtx.createGain();
o.frequency.value=freq;
o.type="square";
g.gain.setValueAtTime(0.05,audioCtx.currentTime);
g.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+dur);
o.connect(g);
g.connect(audioCtx.destination);
o.start();
o.stop(audioCtx.currentTime+dur);
}

function startGame(){
audioCtx=new (window.AudioContext||window.webkitAudioContext)();
state="play";
document.getElementById("start").style.display="none";
resize();
initSpiders();
loop();
}

function initSpiders(){
spiders=[];
for(let i=0;i<2;i++){
spiders.push({
x:Math.random()*0.8+0.1,
t:Math.random()*Math.PI
});
}
}

function loop(){
if(state!=="play")return;

const W=canvas.width/(window.devicePixelRatio||1);
const H=canvas.height/(window.devicePixelRatio||1);
const ground=H-80;

ctx.clearRect(0,0,W,H);

/* Himmel animiert */
let grad=ctx.createLinearGradient(0,0,0,H);
grad.addColorStop(0,"#4facfe");
grad.addColorStop(1,"#1c6dd0");
ctx.fillStyle=grad;
ctx.fillRect(0,0,W,H);

/* Sonne */
ctx.fillStyle="rgba(255,255,0,0.2)";
ctx.beginPath();
ctx.arc(W-60,60,40+Math.sin(Date.now()*0.002)*5,0,7);
ctx.fill();

/* Boden */
ctx.fillStyle="#4caf50";
ctx.fillRect(0,ground,W,80);

/* Hund Bewegung */
const target=(slider.value/1000)*(W-80)+40;
let ax=(target-dog.x)*0.1;
dog.vx+=ax;
dog.vx*=0.85;
dog.x+=dog.vx;
dog.bounce=Math.sin(Date.now()*0.01)*5;

/* Items Spawn (mehr aber kontrolliert) */
spawnTimer+=1/60;
let spawnRate=Math.max(0.6,1.1-(level*0.07));

if(spawnTimer>=spawnRate){
spawnTimer=0;
let r=Math.random();
let it={
xPct:Math.random()*0.8+0.1,
y:-40,
speed:3+(level*0.5)
};

if(r<0.12){it.type="üëÆ";it.bad=true;}
else if(r<0.35){it.type="üçó";it.val=3;}
else if(r<0.65){it.type="üç™";it.val=2;}
else{it.type="ü¶¥";it.val=1;}

items.push(it);
}

/* Items Bewegung */
items.forEach((it,i)=>{
it.y+=it.speed;
let x=it.xPct*W;
ctx.font=it.bad?"55px Arial":"42px Arial";
ctx.fillText(it.type,x-20,it.y);

if(it.y>ground-40&&Math.abs(x-dog.x)<40){
if(it.bad){
lives--;
playTone(120);
if(lives<=0)endGame();
}else{
score+=it.val;
playTone(800);
}
items.splice(i,1);
}
});

/* Spinnen Animation */
spiders.forEach(s=>{
s.t+=0.02+(level*0.002);
let sx=s.x*W;
let sy=50+(Math.sin(s.t)+1)/2*(ground-120);

ctx.strokeStyle="white";
ctx.beginPath();
ctx.moveTo(sx,0);
ctx.lineTo(sx,sy);
ctx.stroke();

ctx.font="35px Arial";
ctx.fillText("üï∑Ô∏è",sx-17,sy+15);

if(Math.abs(sx-dog.x)<40&&Math.abs(sy-(ground-20))<40){
playTone(80);
lives--;
if(lives<=0)endGame();
}
});

/* Hund zeichnen */
ctx.save();
ctx.translate(dog.x,ground);
ctx.font="80px Arial";
ctx.fillText("üê∂",-40,dog.bounce);
ctx.restore();

/* UI Update */
document.getElementById("score").innerText=score;
document.getElementById("lvl").innerText=level;
updateHearts();

requestAnimationFrame(loop);
}

function updateHearts(){
let h="";
for(let i=0;i<3;i++)h+=i<lives?"‚ù§Ô∏è ":"üñ§ ";
document.getElementById("hearts").innerHTML=h;
}

function endGame(){
state="over";
document.getElementById("gameOver").style.display="flex";
}
</script>
</body>
</html>
