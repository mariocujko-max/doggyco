<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Doggyco 6.0 ‚Äì Mobile Arcade</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
--neon:#00f7ff;
--green:#00ff88;
--red:#ff2e63;
--yellow:#ffd166;
}

*{margin:0;padding:0;box-sizing:border-box;}

body{
background:#000;
color:white;
font-family:sans-serif;
overflow:hidden;
}

h1{
text-align:center;
font-family:'Press Start 2P';
font-size:1rem;
color:var(--neon);
text-shadow:0 0 15px var(--neon);
margin:10px 0;
}

#gameWrapper{
position:relative;
width:100%;
max-width:420px;
height:80vh;
margin:auto;
border-radius:25px;
overflow:hidden;
border:3px solid var(--neon);
box-shadow:0 0 30px var(--neon);
}

canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:5px;left:0;right:0;
display:flex;
flex-direction:column;
align-items:center;
z-index:10;
font-family:'Press Start 2P';
}

#topRow{
width:100%;
display:flex;
justify-content:space-around;
font-size:0.8rem;
}

#lifeBarContainer{
width:90%;
height:12px;
border:1px solid white;
margin-top:5px;
}

#lifeBar{
height:100%;
width:100%;
background:var(--green);
}

.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,0.9);
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:20;
}

button{
padding:20px 40px;
font-family:'Press Start 2P';
background:var(--green);
border:none;
border-radius:20px;
cursor:pointer;
}

.bubble{
position:absolute;
font-family:'Press Start 2P';
font-size:0.8rem;
animation:floatUp 1s forwards;
pointer-events:none;
}

@keyframes floatUp{
0%{opacity:1;transform:translateY(0);}
100%{opacity:0;transform:translateY(-50px);}
}
</style>
</head>

<body>

<h1>DOGGYCO 6.0</h1>

<div id="gameWrapper">

<div id="ui">
<div id="topRow">
<div>‚≠ê <span id="score">0</span></div>
<div id="hearts">‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</div>
<div>LVL <span id="level">1</span></div>
</div>
<div id="lifeBarContainer">
<div id="lifeBar"></div>
</div>
</div>

<canvas id="game"></canvas>

<div class="overlay" id="start">
<button onclick="startGame()">START</button>
</div>

<div class="overlay" id="gameOver" style="display:none;">
<h2 style="color:var(--red);margin-bottom:20px;font-family:'Press Start 2P'">GAME OVER</h2>
<button onclick="location.reload()">RETRY</button>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let state="start";
let score=0;
let level=1;
let hearts=3;
let lifeBar=100;
let timer=30;

let items=[];
let sectors=5;
let sectorWidth;
let dogSector=2;

let audioCtx,bgGain;

/* Resize */
function resize(){
const rect=canvas.getBoundingClientRect();
canvas.width=rect.width;
canvas.height=rect.height;
sectorWidth=canvas.width/sectors;
}
window.addEventListener("resize",resize);

/* Sound */
function tone(freq,dur=0.15,vol=0.05){
let o=audioCtx.createOscillator();
let g=audioCtx.createGain();
o.type="sine";
o.frequency.value=freq;
g.gain.value=vol;
o.connect(g);
g.connect(audioCtx.destination);
o.start();
o.stop(audioCtx.currentTime+dur);
}

function heartBreak(){
tone(120,0.3,0.08);
}

function startMusic(){
let o=audioCtx.createOscillator();
bgGain=audioCtx.createGain();
o.type="triangle";
o.frequency.value=180;
bgGain.gain.value=0.02;
o.connect(bgGain);
bgGain.connect(audioCtx.destination);
o.start();
}

/* Bubbles */
function bubble(text,x,y,color){
let b=document.createElement("div");
b.className="bubble";
b.style.left=x+"px";
b.style.top=y+"px";
b.style.color=color;
b.innerText=text;
document.getElementById("gameWrapper").appendChild(b);
setTimeout(()=>b.remove(),1000);
}

/* Start */
function startGame(){
audioCtx=new (window.AudioContext||window.webkitAudioContext)();
startMusic();
resize();
state="play";
document.getElementById("start").style.display="none";
loop();
}

/* Controls */
canvas.addEventListener("touchstart",e=>{
let rect=canvas.getBoundingClientRect();
let x=e.touches[0].clientX-rect.left;
dogSector=Math.floor(x/sectorWidth);
});
canvas.addEventListener("mousedown",e=>{
dogSector=Math.floor(e.offsetX/sectorWidth);
});

/* Spawn */
function spawn(){
let sector=Math.floor(Math.random()*sectors);
let r=Math.random();
let it={sector:sector,y:-30};
if(r<0.15){it.bad=true;it.type="üëÆ";}
else if(r<0.4){it.val=3;it.type="üçó";}
else if(r<0.7){it.val=2;it.type="üç™";}
else{it.val=1;it.type="ü¶¥";}
items.push(it);
}

/* Game Loop */
function loop(){
if(state!=="play")return;

const W=canvas.width;
const H=canvas.height;
const ground=H-80;

ctx.clearRect(0,0,W,H);

/* Himmel */
let grad=ctx.createLinearGradient(0,0,0,H);
grad.addColorStop(0,"#001");
grad.addColorStop(1,"#020024");
ctx.fillStyle=grad;
ctx.fillRect(0,0,W,H);

/* Boden */
ctx.fillStyle="#111";
ctx.fillRect(0,ground,W,80);

/* Spawn Rate */
if(Math.random()<0.05+level*0.005)spawn();

/* Items */
items.forEach((it,i)=>{
it.y+=3+level*0.4;
let x=it.sector*sectorWidth+sectorWidth/2;
ctx.font="40px Arial";
ctx.fillText(it.type,x-20,it.y);

if(it.y>ground-30 && it.sector===dogSector){
if(it.bad){
hearts--;
heartBreak();
bubble("-1 ‚ù§Ô∏è",x,it.y,"red");
if(hearts<=0)endGame();
}else{
score+=it.val*level;
lifeBar+=5;
tone(500+it.val*100);
bubble("+"+(it.val*level),x,it.y,"#0f0");
}
items.splice(i,1);
}
});

/* Hund */
let dogX=dogSector*sectorWidth+sectorWidth/2;
ctx.font="70px Arial";
ctx.fillText("üê∂",dogX-35,ground);

/* LifeBar */
lifeBar-=0.1;
if(lifeBar>100)lifeBar=100;
document.getElementById("lifeBar").style.width=lifeBar+"%";

timer-=1/60;
if(timer<=0){
if(lifeBar<60){
hearts--;
heartBreak();
}
lifeBar=100;
timer=30;
level++;
document.getElementById("level").innerText=level;
}

document.getElementById("score").innerText=score;
updateHearts();

requestAnimationFrame(loop);
}

/* Hearts */
function updateHearts(){
let h="";
for(let i=0;i<3;i++)h+=i<hearts?"‚ù§Ô∏è ":"üñ§ ";
document.getElementById("hearts").innerHTML=h;
}

/* End */
function endGame(){
state="over";
document.getElementById("gameOver").style.display="flex";
}
</script>

</body>
</html>

