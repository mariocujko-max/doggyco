<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Doggyco Arcade</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none;}
body{background:#090a0f;overflow:hidden;font-family:'Orbitron',sans-serif;}

#wrap{
position:relative;
max-width:450px;
height:100vh;
margin:auto;
overflow:hidden;
background:linear-gradient(to bottom,#1b2735 0%,#090a0f 100%);
border:2px solid #222;
}

canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:10px;
width:100%;
z-index:10;
text-align:center;
color:white;
}

#heartDisplay{font-size:40px;margin-bottom:5px;}

.stats-row{
display:flex;
justify-content:space-around;
padding:0 20px;
font-size:18px;
}

#lvlBarWrap{
width:80%;
height:8px;
background:rgba(255,255,255,0.1);
margin:10px auto;
border-radius:10px;
overflow:hidden;
}

#lvlBar{
height:100%;
width:100%;
background:linear-gradient(to right,#00f2fe,#00ff00);
}

.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,0.9);
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:100;
color:white;
text-align:center;
}

button{
padding:15px 40px;
border:2px solid #00f2fe;
background:transparent;
color:#00f2fe;
font-size:20px;
cursor:pointer;
border-radius:30px;
font-family:'Orbitron';
}

.hidden{display:none!important;}
</style>
</head>
<body>

<div id="wrap">

<div id="ui">
<div id="heartDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
<div class="stats-row">
<div>‚≠ê <span id="score">0</span></div>
<div>LVL <span id="lvl">1</span></div>
</div>
<div id="lvlBarWrap"><div id="lvlBar"></div></div>
</div>

<canvas id="game"></canvas>

<div class="overlay" id="startScreen">
<h1 style="color:#00f2fe;margin-bottom:20px;">DOGGYCO ARCADE</h1>
<button onclick="startGame()">START</button>
</div>

<div class="overlay hidden" id="gameOverScreen">
<h2 style="color:#ff416c;">GAME OVER</h2>
<p id="finalScore" style="margin:15px 0;"></p>
<button onclick="location.reload()">NEUSTART</button>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let W,H,lanes=5,laneW;
let dogLane=2,dogX=0;
let items=[],particles=[],boss=null;

let score=0,level=1,hearts=3,timeLeft=30;
let combo=0,highscore=0;
let active=false,arcadeSpeed=1;
let lastTime=0;

let audioCtx=null;

function initAudio(){
if(!audioCtx)
audioCtx=new(window.AudioContext||window.webkitAudioContext)();
}

function beep(f,t,d,v=0.05){
if(!audioCtx)return;
if(audioCtx.state==="suspended")audioCtx.resume();
const o=audioCtx.createOscillator();
const g=audioCtx.createGain();
o.type=t;
o.frequency.value=f;
g.gain.setValueAtTime(v,audioCtx.currentTime);
g.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+d);
o.connect(g);g.connect(audioCtx.destination);
o.start();o.stop(audioCtx.currentTime+d);
}

function resize(){
W=canvas.width=canvas.parentElement.offsetWidth;
H=canvas.height=canvas.parentElement.offsetHeight;
laneW=W/lanes;
dogX=dogLane*laneW+laneW/2;
}
window.addEventListener("resize",resize);
resize();

function move(e){
if(!active)return;
const x=(e.touches?e.touches[0].clientX:e.clientX)
-canvas.getBoundingClientRect().left;
dogLane=Math.max(0,Math.min(lanes-1,Math.floor(x/laneW)));
}
canvas.onmousemove=move;
canvas.ontouchmove=e=>{e.preventDefault();move(e);};

function startGame(){
initAudio();
highscore=localStorage.getItem("doggyHigh")||0;

document.getElementById("startScreen").classList.add("hidden");

active=true;
score=0;level=1;hearts=3;timeLeft=30;
combo=0;arcadeSpeed=1;boss=null;items=[];particles=[];
lastTime=performance.now();
requestAnimationFrame(loop);
}

function loop(timestamp){
if(!active)return;
const delta=(timestamp-lastTime)/1000;
lastTime=timestamp;

ctx.clearRect(0,0,W,H);

/* Wetter (Regen) */
if(level%2===0&&Math.random()<0.3)
particles.push({x:Math.random()*W,y:-10});
particles.forEach((p,i)=>{
p.y+=300*delta;
ctx.fillStyle="rgba(180,200,255,0.4)";
ctx.fillRect(p.x,p.y,2,10);
if(p.y>H)particles.splice(i,1);
});

/* Timer */
timeLeft-=delta;
document.getElementById("lvlBar").style.width=
Math.max(0,(timeLeft/30)*100)+"%";

if(timeLeft<=0){
level++;
arcadeSpeed+=0.2;
timeLeft=30;
document.getElementById("lvl").innerText=level;
if(level%5===0)boss={hp:20+level*5};
}

/* Items */
if(!boss&&Math.random()<0.02+level*0.004){
items.push({
lane:Math.floor(Math.random()*lanes),
y:-40,
type:Math.random()<0.2?"üëÆ":"ü¶¥"
});
}

for(let i=items.length-1;i>=0;i--){
let it=items[i];
it.y+=250*delta*arcadeSpeed;
let x=it.lane*laneW+laneW/2;
ctx.font="40px Arial";
ctx.textAlign="center";
ctx.fillText(it.type,x,it.y);

if(it.lane===dogLane&&it.y>H-120&&it.y<H-60){
if(it.type==="üëÆ"){
loseHeart();combo=0;
}else{
combo++;
score+=10*combo;
beep(500+combo*20,"sine",0.1);
}
items.splice(i,1);
}
else if(it.y>H+40)items.splice(i,1);
}

/* Boss */
if(boss){
ctx.font="80px Arial";
ctx.fillText("üëπ",W/2,120);
ctx.fillStyle="red";
ctx.fillRect(W/2-100,140,boss.hp*5,10);
if(dogLane===2)boss.hp-=5*delta;
if(boss.hp<=0){
score+=500;
boss=null;
beep(800,"square",0.3);
}
}

/* Dog */
let targetX=dogLane*laneW+laneW/2;
dogX+=(targetX-dogX)*10*delta;
ctx.font="60px Arial";
ctx.fillText("üê∂",dogX,H-70);

/* UI */
document.getElementById("score").innerText=score+" x"+combo;

if(score>highscore){
highscore=score;
localStorage.setItem("doggyHigh",highscore);
}

requestAnimationFrame(loop);
}

function loseHeart(){
hearts--;
beep(120,"sawtooth",0.4);
document.getElementById("heartDisplay")
.innerText="‚ù§Ô∏è".repeat(hearts);
if(hearts<=0){
active=false;
document.getElementById("gameOverScreen")
.classList.remove("hidden");
document.getElementById("finalScore").innerHTML=
"Punkte: "+score+
"<br>Highscore: "+highscore;
}
}
</script>

</body>
</html>
