<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Doggyco Classic</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none;}
body{overflow:hidden;font-family:Arial,sans-serif;}

#wrap{
position:relative;
height:100vh;
max-width:480px;
margin:auto;
overflow:hidden;
background:linear-gradient(#87ceeb,#d0f0ff);
}

canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:10px;
width:100%;
text-align:center;
color:white;
z-index:10;
text-shadow:0 0 5px black;
}

#hearts{font-size:28px;margin-bottom:5px;}

#scoreBarWrap{
width:80%;
height:12px;
background:#333;
margin:5px auto;
border-radius:10px;
overflow:hidden;
}

#scoreBar{
height:100%;
width:0%;
background:lime;
}

.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,0.8);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
color:white;
z-index:20;
}

button{
padding:12px 30px;
font-size:18px;
border:none;
background:#ffcc00;
border-radius:6px;
cursor:pointer;
margin-top:15px;
}
</style>
</head>
<body>

<div id="wrap">

<div id="ui">
<div id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
<div>Punkte: <span id="score">0</span></div>
<div>Zeit: <span id="time">60</span> s</div>
<div id="scoreBarWrap"><div id="scoreBar"></div></div>
</div>

<canvas id="game"></canvas>

<div class="overlay" id="startScreen">
<h1>DOGGYCO CLASSIC</h1>
<button onclick="startGame()">START</button>
</div>

<div class="overlay" id="gameOver" style="display:none;">
<h2>GAME OVER</h2>
<div id="final"></div>
<button onclick="location.reload()">NEUSTART</button>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let W,H;
let lanes=5,laneW;
let dogLane=2,dogX=0;

let items=[];
let spiders=[
{x:100,dir:1,drop:0},
{x:300,dir:-1,drop:0}
];

let score=0;
let hearts=3;
let timeLeft=60;
let active=false;
let lastTime=0;

/* Resize */
function resize(){
W=canvas.width=canvas.parentElement.offsetWidth;
H=canvas.height=canvas.parentElement.offsetHeight;
laneW=W/lanes;
dogX=dogLane*laneW+laneW/2;
}
window.addEventListener("resize",resize);
resize();

/* Start */
function startGame(){
document.getElementById("startScreen").style.display="none";
score=0;
hearts=3;
timeLeft=60;
items=[];
active=true;
lastTime=performance.now();
setInterval(()=>{
if(active && timeLeft>0) timeLeft--;
},1000);
requestAnimationFrame(loop);
}

/* Input */
canvas.onmousemove=e=>{
if(!active)return;
let x=e.clientX-canvas.getBoundingClientRect().left;
dogLane=Math.floor(x/laneW);
};
canvas.ontouchmove=e=>{
e.preventDefault();
let x=e.touches[0].clientX-canvas.getBoundingClientRect().left;
dogLane=Math.floor(x/laneW);
};

/* Loop */
function loop(t){
if(!active)return;
let delta=(t-lastTime)/1000;
lastTime=t;
ctx.clearRect(0,0,W,H);

/* Hintergrund */
ctx.fillStyle="#87ceeb";
ctx.fillRect(0,0,W,H);

/* Wolken */
ctx.fillStyle="white";
ctx.beginPath();
ctx.arc(100+(t/50)%W,100,30,0,Math.PI*2);
ctx.fill();

/* Stra√üe */
ctx.fillStyle="#444";
ctx.fillRect(0,H-120,W,120);

/* B√§ume */
ctx.fillStyle="green";
ctx.fillRect(50,H-170,30,50);
ctx.beginPath();
ctx.arc(65,H-180,30,0,Math.PI*2);
ctx.fill();

/* V√∂gel */
ctx.font="20px Arial";
ctx.fillText("üê¶",(t/5)%W,80);

/* Spawn Items */
if(Math.random()<0.03){
let types=["ü¶¥","üçñ","üç™","üëÆ"];
items.push({
lane:Math.floor(Math.random()*lanes),
y:-40,
type:types[Math.floor(Math.random()*types.length)]
});
}

/* Draw Items */
for(let i=items.length-1;i>=0;i--){
let it=items[i];
it.y+=200*delta;
let x=it.lane*laneW+laneW/2;
ctx.font="40px Arial";
ctx.fillText(it.type,x,it.y);

if(it.lane===dogLane && it.y>H-150 && it.y<H-90){
if(it.type==="ü¶¥") score+=1;
if(it.type==="üçñ") score+=5;
if(it.type==="üç™") score+=3;
if(it.type==="üëÆ") hearts--;
items.splice(i,1);
}
if(it.y>H) items.splice(i,1);
}

/* Spiders */
spiders.forEach(s=>{
s.x+=s.dir*60*delta;
if(s.x<50||s.x>W-50)s.dir*=-1;

s.drop+=100*delta;
if(s.drop>H-140)s.drop=0;

ctx.strokeStyle="black";
ctx.beginPath();
ctx.moveTo(s.x,0);
ctx.lineTo(s.x,s.drop);
ctx.stroke();
ctx.fillText("üï∑Ô∏è",s.x-10,s.drop+20);

if(Math.abs(s.x-dogX)<30 && s.drop>H-160){
hearts--;
s.drop=0;
}
});

/* Dog */
dogX+=((dogLane*laneW+laneW/2)-dogX)*10*delta;
ctx.font="60px Arial";
ctx.fillText("üê∂",dogX,H-70);

/* UI */
document.getElementById("score").innerText=score;
document.getElementById("hearts").innerText="‚ù§Ô∏è".repeat(hearts);
document.getElementById("time").innerText=timeLeft;
document.getElementById("scoreBar").style.width=(score%100)+"%";

/* Game Over */
if(hearts<=0 || timeLeft<=0){
active=false;
document.getElementById("gameOver").style.display="flex";
document.getElementById("final").innerHTML="Punkte: "+score;
}

requestAnimationFrame(loop);
}
</script>

</body>
</html>
