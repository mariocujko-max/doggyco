<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doggyco 2.1 â€“ Cute Arcade</title>

<style>
:root{
--bg:#181824;
--panel:#24243a;
--accent:#ff9ecf;
--gold:#ffd166;
--danger:#ff6b6b;
}

body{
margin:0;
font-family:Segoe UI, sans-serif;
background:linear-gradient(180deg,#1f1f2e,#12121c);
color:white;
display:flex;
flex-direction:column;
align-items:center;
}

header{
padding:15px;
text-align:center;
}

h1{
margin:0;
color:var(--accent);
}

#game-container{
position:relative;
width:95vw;
max-width:420px;
}

.stats{
display:flex;
justify-content:space-between;
background:var(--panel);
padding:8px;
border-radius:10px 10px 0 0;
font-size:13px;
}

canvas{
width:100%;
background:radial-gradient(circle,#2d2d44,#141421);
border-radius:0 0 10px 10px;
}

.overlay{
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.9);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
padding:20px;
box-sizing:border-box;
}

input,select{
padding:10px;
margin:6px 0;
border-radius:8px;
border:none;
width:80%;
}

button{
background:linear-gradient(45deg,#ff9ecf,#ffd166);
border:none;
padding:12px 20px;
border-radius:20px;
font-weight:bold;
cursor:pointer;
margin-top:10px;
}

#leaderboard{
margin-top:20px;
width:95vw;
max-width:420px;
background:var(--panel);
padding:15px;
border-radius:10px;
}

.entry{
display:flex;
justify-content:space-between;
padding:5px 0;
border-bottom:1px solid #444;
}
</style>
</head>
<body>

<header>
<h1>ğŸ¶ Doggyco 2.1</h1>
<p>Cute Arcade Challenge</p>
</header>

<div id="game-container">

<div class="stats">
<div>Score: <span id="score">0</span></div>
<div>Level: <span id="level">1</span></div>
<div>Combo: <span id="combo">x1</span></div>
<div>â¤ï¸ <span id="lives">3</span></div>
</div>

<canvas id="game" width="400" height="500"></canvas>

<div class="overlay" id="startScreen">
<h2>Start Game</h2>
<input id="playerName" placeholder="Dein Name">
<select id="playerFlag">
<option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª</option>
<option value="ğŸ‡¦ğŸ‡¹">ğŸ‡¦ğŸ‡¹</option>
<option value="ğŸ‡¨ğŸ‡­">ğŸ‡¨ğŸ‡­</option>
<option value="ğŸ‡ºğŸ‡¸">ğŸ‡ºğŸ‡¸</option>
<option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡·</option>
<option value="ğŸ‡ªğŸ‡¸">ğŸ‡ªğŸ‡¸</option>
</select>
<button id="startBtn">Play</button>
</div>

<div class="overlay" id="gameOverScreen" style="display:none;">
<h2>Game Over</h2>
<p id="finalScore"></p>
<button id="restartBtn">Play Again</button>
</div>

</div>

<div id="leaderboard">
<h2>ğŸ† Leaderboard</h2>
<div id="leaderboardList"></div>
</div>

<script>
/* ===== GAME STATE ===== */
const STATE = {
START: "start",
PLAYING: "playing",
GAMEOVER: "gameover"
};

let gameState = STATE.START;

/* ===== CANVAS ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ===== GAME VARIABLES ===== */
let score, lives, level, combo, comboMulti, xp, speed;
let items = [];
let spawnTimer = 0;
let player = { name:"", flag:"" };
let dog = { x:180, y:420, width:40 };

/* ===== INPUT ===== */
canvas.addEventListener("mousemove", moveDog);
canvas.addEventListener("touchmove", moveDog, {passive:false});

function moveDog(e){
if(gameState !== STATE.PLAYING) return;
let rect = canvas.getBoundingClientRect();
let clientX = e.touches ? e.touches[0].clientX : e.clientX;
dog.x = (clientX - rect.left)*(400/rect.width) - 20;
dog.x = Math.max(0, Math.min(360, dog.x));
}

/* ===== START GAME ===== */
document.getElementById("startBtn").addEventListener("click", ()=>{
const nameInput = document.getElementById("playerName").value.trim();
if(!nameInput){
alert("Bitte Namen eingeben ğŸ¶");
return;
}
player.name = nameInput;
player.flag = document.getElementById("playerFlag").value;
initGame();
});

function initGame(){
score=0;
lives=3;
level=1;
combo=0;
comboMulti=1;
xp=0;
speed=2;
items=[];
spawnTimer=0;

gameState = STATE.PLAYING;
document.getElementById("startScreen").style.display="none";
loop();
}

/* ===== MAIN LOOP ===== */
function loop(){
if(gameState !== STATE.PLAYING) return;

update();
draw();
requestAnimationFrame(loop);
}

function update(){
spawnTimer++;
if(spawnTimer > 60 - level*3){
spawnItem();
spawnTimer=0;
}

items.forEach(item=> item.y += item.speed);

items = items.filter(item=>{
if(checkCollision(item)){
if(item.danger){
lives--;
combo=0;
comboMulti=1;
if(lives<=0){
endGame();
}
}else{
combo++;
if(combo>=3) comboMulti=2;
if(combo>=6) comboMulti=3;
score+=comboMulti;
xp++;
if(xp%20===0){
level++;
speed+=0.4;
}
}
return false;
}
return item.y < 520;
});

updateUI();
}

function draw(){
ctx.clearRect(0,0,400,500);

ctx.font="40px Arial";
ctx.fillText("ğŸ¶",dog.x,dog.y);

items.forEach(item=>{
ctx.fillText(item.type,item.x,item.y);
});
}

/* ===== SPAWN ===== */
function spawnItem(){
let rand = Math.random();
items.push({
x:Math.random()*360,
y:-30,
speed:speed,
type: rand<0.2 ? "ğŸ‘®" : "ğŸ¦´",
danger: rand<0.2
});
}

/* ===== COLLISION ===== */
function checkCollision(item){
return(
item.y > dog.y-20 &&
item.y < dog.y+20 &&
item.x > dog.x-20 &&
item.x < dog.x+20
);
}

/* ===== UI ===== */
function updateUI(){
document.getElementById("score").innerText=score;
document.getElementById("level").innerText=level;
document.getElementById("combo").innerText="x"+comboMulti;
document.getElementById("lives").innerText=lives;
}

/* ===== GAME OVER ===== */
function endGame(){
gameState = STATE.GAMEOVER;
document.getElementById("finalScore").innerText="Score: "+score;
saveScore();
document.getElementById("gameOverScreen").style.display="flex";
}

document.getElementById("restartBtn").addEventListener("click", ()=>{
document.getElementById("gameOverScreen").style.display="none";
document.getElementById("startScreen").style.display="flex";
gameState = STATE.START;
});

/* ===== LEADERBOARD ===== */
function saveScore(){
let board = JSON.parse(localStorage.getItem("doggyPro")) || [];
board.push({name:player.name, flag:player.flag, score:score});
board.sort((a,b)=>b.score-a.score);
board = board.slice(0,10);
localStorage.setItem("doggyPro", JSON.stringify(board));
renderLeaderboard();
}

function renderLeaderboard(){
let board = JSON.parse(localStorage.getItem("doggyPro")) || [];
let list = document.getElementById("leaderboardList");
list.innerHTML="";
board.forEach((p,i)=>{
list.innerHTML+=`
<div class="entry">
<span>${i+1}. ${p.flag} ${p.name}</span>
<span>${p.score}</span>
</div>
`;
});
}

renderLeaderboard();
</script>

</body>
</html>
