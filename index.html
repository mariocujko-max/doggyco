<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Doggyco 12.0 ‚Äì Arcade Deluxe</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#111;overflow:hidden;font-family:sans-serif;}
h1{
text-align:center;
font-family:'Press Start 2P';
font-size:0.9rem;
color:white;
margin:10px 0;
}
#wrap{
position:relative;
width:100%;
max-width:430px;
height:90vh;
margin:auto;
border-radius:25px;
overflow:hidden;
box-shadow:0 0 40px rgba(0,0,0,0.7);
background:#000;
}
canvas{width:100%;height:100%;display:block;}

#ui{
position:absolute;
top:8px;
left:0;right:0;
display:flex;
justify-content:space-around;
font-family:'Press Start 2P';
font-size:0.75rem;
color:white;
z-index:10;
}

#progressBar{
position:absolute;
top:50px;
left:8%;
width:84%;
height:10px;
background:#333;
border-radius:10px;
overflow:hidden;
}
#progress{
height:100%;
width:0%;
background:linear-gradient(to right, red, orange, yellow, lime);
transition:width 0.3s;
}

.overlay{
position:absolute;
inset:0;
background:linear-gradient(to bottom,#000000dd,#111111ee);
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
color:white;
font-family:'Press Start 2P';
z-index:20;
}

button{
margin-top:15px;
padding:15px 25px;
border:none;
border-radius:20px;
background:#4caf50;
font-family:'Press Start 2P';
cursor:pointer;
}

input{
margin-top:10px;
padding:10px;
border-radius:10px;
border:none;
text-align:center;
}
</style>
</head>
<body>

<h1>DOGGYCO 12.0</h1>

<div id="wrap">
<div id="ui">
<div>‚≠ê <span id="score">0</span></div>
<div>‚ù§Ô∏è <span id="hearts">3</span></div>
<div>üèÅ <span id="lvl">1</span></div>
<div>üî• <span id="combo">x1</span></div>
</div>

<div id="progressBar"><div id="progress"></div></div>

<canvas id="game"></canvas>

<div class="overlay" id="start">
<button onclick="startGame()">START</button>
</div>

<div class="overlay" id="gameOver" style="display:none;">
<div>GAME OVER</div>
<div style="margin-top:10px;">Score: <span id="finalScore"></span></div>
<input id="playerName" placeholder="Dein Name">
<button onclick="saveScore()">Speichern</button>
<div id="leaderboard" style="margin-top:15px;font-size:0.6rem;"></div>
<button onclick="restartGame()">Neu Starten</button>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let W,H;
let lanes=6,laneW;
let dogLane=3,dogX=0,targetX=0;
let items=[],bubbles=[],clouds=[],birds=[],particles=[];
let score=0,level=1,hearts=3,combo=1;
let levelTimer=0;
let state="start";
let animationId;
let audioCtx;

/* Resize */
function resize(){
const r=canvas.getBoundingClientRect();
canvas.width=r.width;
canvas.height=r.height;
W=canvas.width; H=canvas.height;
laneW=W/lanes;
dogX=laneW*dogLane+laneW/2;
}
window.addEventListener("resize",resize);

/* Music */
function startMusic(){
audioCtx=new (window.AudioContext||window.webkitAudioContext)();
let notes=[220,262,330,392];
let i=0;
setInterval(()=>{
let o=audioCtx.createOscillator();
let g=audioCtx.createGain();
o.type="square";
o.frequency.value=notes[i%notes.length];
g.gain.value=0.03;
o.connect(g);g.connect(audioCtx.destination);
o.start();o.stop(audioCtx.currentTime+0.2);
i++;
},400);
}

/* Start */
function startGame(){
resize();
initBackground();
startMusic();
state="play";
document.getElementById("start").style.display="none";
loop();
}

/* Restart */
function restartGame(){
score=0;level=1;hearts=3;combo=1;levelTimer=0;
items=[];bubbles=[];birds=[];particles=[];
state="play";
document.getElementById("gameOver").style.display="none";
loop();
}

/* Controls */
let dragging=false;
canvas.addEventListener("mousedown",()=>dragging=true);
canvas.addEventListener("mouseup",()=>dragging=false);
canvas.addEventListener("mousemove",e=>{
if(dragging)dogLane=Math.floor(e.offsetX/laneW);
});
canvas.addEventListener("touchstart",()=>dragging=true);
canvas.addEventListener("touchend",()=>dragging=false);
canvas.addEventListener("touchmove",e=>{
let rect=canvas.getBoundingClientRect();
let x=e.touches[0].clientX-rect.left;
dogLane=Math.floor(x/laneW);
});

/* Background */
function initBackground(){
for(let i=0;i<3;i++)clouds.push({x:Math.random()*W,y:60+i*40});
}

function drawBackground(){
let sky=ctx.createLinearGradient(0,0,0,H);
if(level<4){
sky.addColorStop(0,"#87ceeb");
sky.addColorStop(1,"#e6f7ff");
}else{
sky.addColorStop(0,"#ff9966");
sky.addColorStop(1,"#ff5e62");
}
ctx.fillStyle=sky;
ctx.fillRect(0,0,W,H);

ctx.fillStyle="#8bc34a";
ctx.beginPath();
ctx.arc(W/2,H-150,300,Math.PI,0);
ctx.fill();

ctx.fillStyle="#444";
ctx.fillRect(0,H-120,W,120);
ctx.fillStyle="#fff";
for(let i=0;i<W;i+=40){
ctx.fillRect(i,H-65,20,5);
}

clouds.forEach(c=>{
c.x+=0.2;
if(c.x>W+60)c.x=-60;
ctx.fillStyle="rgba(255,255,255,0.9)";
ctx.beginPath();
ctx.arc(c.x,c.y,25,0,7);
ctx.arc(c.x+30,c.y+5,20,0,7);
ctx.arc(c.x-30,c.y+5,20,0,7);
ctx.fill();
});

if(Math.random()<0.002){
birds.push({x:-20,y:50+Math.random()*100});
}
birds.forEach((b,i)=>{
b.x+=1;
ctx.fillText("üê¶",b.x,b.y);
if(b.x>W+20)birds.splice(i,1);
});
}

/* Spawn */
function spawn(){
let lane=Math.floor(Math.random()*lanes);
if(items.some(it=>it.lane===lane && it.y<100))return;
let r=Math.random();
let it={lane:lane,y:-40};
if(r<0.1){it.type="üëÆ";it.bad=true;}
else if(r<0.4){it.type="üçñ";it.val=3;}
else if(r<0.7){it.type="üç™";it.val=2;}
else{it.type="ü¶¥";it.val=1;}
items.push(it);
}

/* Loop */
function loop(){
if(state!=="play")return;
animationId=requestAnimationFrame(loop);
ctx.clearRect(0,0,W,H);
drawBackground();

/* Level Progress */
levelTimer+=1/60;
let percent=Math.min(levelTimer/30,1);
document.getElementById("progress").style.width=(percent*100)+"%";
if(levelTimer>=30){level++;levelTimer=0;}

/* Spawn */
if(Math.random()<0.02+level*0.005)spawn();

/* Items */
items.forEach((it,i)=>{
it.y+=2+level*0.5;
let x=it.lane*laneW+laneW/2;
ctx.font="36px Arial";
ctx.fillText(it.type,x-18,it.y);

if(it.y>H-130 && it.lane===dogLane){
if(it.bad){
hearts--;
combo=1;
}else{
let pts=it.val*level*combo;
score+=pts;
combo++;
bubbles.push({x:x,y:it.y,text:"+"+pts,life:60});
}
items.splice(i,1);
}
});

/* Dog */
targetX=dogLane*laneW+laneW/2;
dogX+=(targetX-dogX)*0.15;
ctx.fillText("üê∂",dogX-32,H-120);

/* Bubbles */
bubbles.forEach((b,i)=>{
b.y-=1;
b.life--;
ctx.fillStyle="rgba(0,0,0,"+(b.life/60)+")";
ctx.fillText(b.text,b.x-10,b.y);
if(b.life<=0)bubbles.splice(i,1);
});

/* UI */
document.getElementById("score").innerText=score;
document.getElementById("hearts").innerText=hearts;
document.getElementById("lvl").innerText=level;
document.getElementById("combo").innerText="x"+combo;

if(hearts<=0){
state="over";
cancelAnimationFrame(animationId);
document.getElementById("finalScore").innerText=score;
document.getElementById("gameOver").style.display="flex";
}
}
</script>
</body>
</html>
